(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{340:function(t,e,i){"use strict";i.r(e);var n=i(898),a=i(514);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var r=i(35),l=Object(r.a)(a.default,n.a,n.b,!1,null,null,null);l.options.__file="src/components/common/qiniu.vue",e.default=l.exports},514:function(t,e,i){"use strict";i.r(e);var n=i(515),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e.default=a.a},515:function(t,e,i){"use strict";var n=i(23);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(781)),o=n(i(130)),r={props:{options:{type:Object,default:function(){}},type:{type:String,default:"image"},dataType:String,dragdrop:{type:Boolean,default:!1},value:{type:[Object,Array,String]},limit:Number,className:String},data:function(){return{uploadList:[]}},methods:{deletefile:function(t){var e=null;"images"==this.type||"files"==this.type?(e=o.default.copy(this.value)).splice(t,1):(e=null,this.uploadList=[]),this.$emit("input",e)},init:function(){var t=this,e={runtimes:"html5",browse_button:this.$refs.uploader.getBrowseButton(),uptoken_url:"https://www.heyui.top/api/uptoken",domain:"//img.heyui.top",chunk_size:"4mb",unique_names:!0,auto_start:!1,filters:{},init:{FilesAdded:function(e,i){t.limit&&i.length+t.value.length>t.limit?t.$Message.error("你上传的文件超过".concat(t.limit,"个。")):(i.forEach((function(e){if(FileReader){var i=new FileReader;i.onload=function(t){e.thumbUrl=t.target.result},i.readAsDataURL(e.getNative())}"files"==t.type||"images"==t.type?t.uploadList.push(e):t.uploadList=[e]})),e.start())},BeforeUpload:function(t,e){},UploadProgress:function(t,e){},FileUploaded:function(t,e,i){var n=t.getOption("domain"),a=JSON.parse(i.response),o="".concat(n,"/").concat(a.key);e.url=o},Error:function(e,i,n){t.uploadList.splice(0,t.uploadList.length),t.$Message.error(n)},UploadComplete:function(){t.$emit("completeUpload");var e=t.$refs.uploader.getFileList();t.$emit("input",e),"files"!=t.type&&"images"!=t.type||t.uploadList.splice(0,t.uploadList.length)}}};this.dragdrop&&(e.dragdrop=!0,e.drop_element=this.$refs.uploader.getDropElement()),o.default.extend(e,this.options);var i="files"==this.type||"images"==this.type;e.multi_selection=i,a.default.Qiniu.uploader(e)},fileclick:function(t){this.$Modal({title:"预览或者下载",content:"自定义处理文件预览或者下载"})}},mounted:function(){var t=this;this.$nextTick((function(){t.init()}))}};e.default=r},898:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Uploader",{ref:"uploader",attrs:{type:t.type,files:t.value,"data-type":t.dataType,limit:t.limit,uploadList:t.uploadList,dragdrop:t.dragdrop,"class-name":t.className},on:{fileclick:t.fileclick,deletefile:t.deletefile}},[t.$slots.dragdrop?i("div",{attrs:{slot:"dragdrop"},slot:"dragdrop"},[t._t("dragdrop")],2):t._e()])],1)},a=[];n._withStripped=!0,i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}))}}]);