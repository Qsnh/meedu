
## å®‰è£…æ•™ç¨‹

> [MeEduå¸¸è§é—®é¢˜æ€»ç»“åŠåŠŸèƒ½ä»‹ç»](https://www.yuque.com/meedu/yr7rek)

#### ç¯å¢ƒè¦æ±‚

+ Composer
+ PHP >= 7.2
+ MySql >= 5.6
+ Zip PHP Extension
+ OpenSSL PHP Extension
+ PDOMysql PHP Extension
+ Mbstring PHP Extension
+ Tokenizer PHP Extension
+ XML PHP Extension
+ Fileinfo PHP Extension

## æ­¥éª¤

#### æ­¥éª¤ä¸€

å®‰è£… meedu

```
git clone https://github.com/Qsnh/meedu.git meedu
composer install --no-dev
cp .env.example .env
```

#### æ­¥éª¤äºŒ

ç”ŸæˆJWTç§˜é’¥ï¼š

```
php artisan key:generate
php artisan jwt:secret
```

é…ç½®æ•°æ®åº“ï¼Œæ‰“å¼€ .env æ–‡ä»¶ï¼Œä¿®æ”¹ä¸‹é¢çš„å†…å®¹ï¼š

```
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=homestead
DB_USERNAME=homestead
DB_PASSWORD=secret
```

é…ç½®åŸºæœ¬ä¿¡æ¯

```
APP_NAME=MeEdu
APP_ENV=local(è¿™é‡Œå¦‚æœæ­£å¼è¿è¡Œï¼Œè¯·ä¿®æ”¹ä¸ºï¼šproduction)
APP_DEBUG=true(è¿™é‡Œå¦‚æœæ˜¯æ­£å¼è¿è¡Œï¼Œè¯·ä¿®æ”¹ä¸ºï¼šfalse)
APP_LOG_LEVEL=debug
APP_URL=http://localhost(è¿™é‡Œä¿®æ”¹ä½ è‡ªå·±çš„åœ°å€)
```

#### æ­¥éª¤ä¸‰

åˆ›å»ºä¸Šä¼ ç›®å½•è½¯é“¾æ¥ï¼š

```
php artisan storage:link
```

#### æ­¥éª¤å››

è®¾ç½® `storage` ç›®å½•æƒé™ä¸º `777`

```
chmod -R  0777 storage
```

#### æ­¥éª¤äº”

é…ç½®ä¼ªé™æ€å¹¶è®¾ç½® meedu çš„è¿è¡Œç›®å½•ä¸º `public` ã€‚

ä¼ªé™æ€è§„åˆ™ï¼ˆNginxï¼‰ï¼š

```
location / {  
	try_files $uri $uri/ /index.php$is_args$query_string;  
}
```

#### æ­¥éª¤å…­

å®‰è£…æ•°æ®è¡¨

```
php artisan migrate
```

#### æ­¥éª¤ä¸ƒ

åˆå§‹åŒ–ç³»ç»Ÿé…ç½®ï¼š

```
php artisan install config
```

åˆå§‹åŒ–ç³»ç»Ÿæƒé™ï¼š

```
php artisan install role
```

åˆå§‹åŒ–ç®¡ç†å‘˜ï¼š

```
php artisan install administrator
```

> å®‰è£…æç¤ºè¾“å…¥ç®¡ç†å‘˜çš„è´¦å·å’Œå¯†ç ï¼

  
**ç”Ÿæˆå®‰è£…é”ğŸ”æ–‡ä»¶**

```
php artisan install:lock
```

#### æ­¥éª¤å…«

åˆ°è¿™é‡Œï¼ŒMeEdu åŸºæœ¬ä¸Šå°±å®‰è£…å®Œæˆäº†ã€‚ä½†æ˜¯ï¼Œæƒ³è¦è®¿é—® MeEdu çš„åå°ï¼Œæ‚¨è¿˜éœ€è¦å®‰è£… MeEdu çš„åå°çš„å‰ç«¯é¡¹ç›®ï¼Œåœ°å€ï¼š
[https://github.com/Meedu/backend](https://github.com/Meedu/backend) ã€‚è¯·æŒ‰ç…§è¯¥é¡¹ç›®çš„è¯´æ˜è¿›è¡Œå®‰è£…ã€‚

#### æ­¥éª¤ä¹

é…ç½®ä»»åŠ¡è°ƒåº¦å™¨ï¼š

å°†ä¸‹é¢å†…å®¹æ·»åŠ åˆ° crontab è®¡åˆ’ä»»åŠ¡ä¸­ï¼š

```
* * * * * php /path-to-your-project/artisan schedule:run >> /dev/null 2>&1
```

> æ³¨æ„æ›¿æ¢å…¶ä¸­çš„è·¯å¾„ä¸ºmeeduæ‰€åœ¨è·¯å¾„


### æ­¥éª¤å

é…ç½®é˜Ÿåˆ—ç›‘å¬å™¨ï¼š

é¦–å…ˆï¼Œå®‰è£… supervisor :

```
sudo apt install supervisor
```

é…ç½® supervisor 

```
cd /etc/supervisor/conf.d
vi meedu.conf
```

å°†ä¸‹é¢çš„å†…å®¹ç²˜è´´è¿›å»ï¼š

```
[program:meedu]
process_name=%(program_name)s_%(process_num)02d
command=php /you-project-path/artisan queue:work --sleep=3 --tries=3
autostart=true
autorestart=true
user=root
numprocs=1
redirect_stderr=true
stdout_logfile=/you-project-path/storage/logs/supervisor.log
```

> æ³¨æ„æ›¿æ¢å…¶ä¸­çš„è·¯å¾„å’Œuser

é‡å¯æœåŠ¡ï¼š

```angular2html
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start meedu:*
```

å¦‚æœé…ç½®æ­£ç¡®ï¼Œä½ ä¼šçœ‹åˆ° supervisor çš„è¾“å‡ºæ—¥å¿—ï¼Œæ—¥å¿—è·¯å¾„å°±æ˜¯ä¸Šé¢é…ç½®çš„ stdout_logfile çš„å€¼ã€‚

## å¸¸è§é—®é¢˜

#### Mysql8æ•°æ®åº“

mysql8 é»˜è®¤çš„é…ç½®æ”¹ä¸ºdefault-authentication-plugin=mysql_native_password